<!DOCTYPE html>
<html lang="cs">
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="description" content="Otevřené místo pro všechny PHP programátory">
<meta name="keywords" content="PHP, komunita, programování, srazy, školení, blog, články">
<meta name="author" content="https://pehapkari.cz">
<meta name="robots" content="index, follow">

<meta property="og:image" content="/assets/images/meetup.jpg">
<meta property="fb:pages" content="918297778220033" />

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<link rel="alternate" type="application/rss+xml" title="Péhápkaři.cz Blog RSS" href="/rss.xml">

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700&display=swap&subset=latin-ext" rel="stylesheet">

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<link href="/favicon.ico" rel="shortcut icon">

<title>
     ORM... WTF??? | Děláš v PHP? Jsi jedním z nás
</title>

<link rel="stylesheet" href="/build/css/app.css">

<link rel="stylesheet" href="/assets/prism/prism.css">
<link rel="stylesheet" href="/assets/prism/prism-custom.css">

<link rel="stylesheet" href="https://use.typekit.net/jmg2upk.css">

<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i|Ubuntu+Mono&amp;subset=latin-ext" rel="stylesheet">

        <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    </head>

    <body id="">
        <nav id="ph-nav" class="navbar fixed-top navbar-expand navbar-light bg-light ph-nav border-bottom hidden-sm-down">
    <div class="container">
        <a class="ph-nav__logo" href="/">
            <img src="/assets/pehapkari_logo/logo.svg" alt="logo" title="">
            <br>
            <p>Péhápkaři</p>
        </a>

        <div id="top-menu-search" class="hidden-md-down">
            <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction">
    <meta itemprop="target" content="https://www.google.com/search?q={q}"/>
    <input name="sitesearch" value="pehapkari.cz" type="hidden"/>
    <input itemprop="query-input" type="text" id="search-query" class="form-control" required="required" name="q" placeholder="Napiš co hledáš..." autocomplete="off"/>
</form>
        </div>

        <ul class="navbar-nav ml-auto hidden-sm-down" id="menu">
            <li>
                <a class="active" href="/blog">
                    Blog
                </a>
            </li>
            <li>
                <a class="" href="/prehaj-si-prednasku">
                    Videa
                </a>
            </li>
            <li class="pr-0">
                <a class="" href="/kontakt">
                    Kontakt
                </a>
            </li>
        </ul>
    </div>
</nav>

<div id="mobile-menu" class="row ml-0 mr-0 text-center hidden-md-up border-bottom">
    <a href="/" class="ph-nav__logo col-3 ">
        <img src="/assets/pehapkari_logo/logo.svg" alt="logo" title="">
    </a>

    <a href="/prehaj-si-prednasku" class="col-3 ">
        Videa
    </a>
    <a href="/blog" class="col-3 ">
        Blog
    </a>
</div>

                    <div id="main">
                

                    <div class="container" id="article">
        <h1>ORM... WTF???</h1>

        <strong>Svaťa Šimara</strong>
        &nbsp;
        <time datetime="2018-04-Wed">
            18. 4. 2018
        </time>

        <br>

        <div class="card mt-4 mb-4">
            <div class="card-body text-bigger">
                <p>We will take a look at what is the object-relational mapping and what it is not.
We will show why it is difficult, when to use it and when it's better to avoid it.</p>
            </div>
        </div>

        <h2>Terms</h2>
<p>Let's repeat basic terms so we are on the same page.</p>
<h3>Relational Model</h3>
<p>The relational model focuses on data and their representation.
Data are organized in rows and tables.
This is a low-level model for databases.</p>
<p><img src="/assets/images/posts/2018/orm-wtf/relational_model.png" alt="relational model - tables connected by arrows" /></p>
<p>When we model data, we often think of the entity-relational model and it is fine.
ER model is an abstraction based on the relational model and still focuses on data.</p>
<h3>Object Model</h3>
<p>Object model focuses on in-memory objects associated with references.
Class model especially aims at object encapsulation by behavior.</p>
<p><img src="/assets/images/posts/2018/orm-wtf/object_model.png" alt="object model - entities connected by references" /></p>
<h3>Relational Database</h3>
<p>A relational database is a database based on relational model usually managed by SQL.
We use it when we need transactional consistency, data integrity and when we need to join data relationally.</p>
<h2>Object-relational mapping</h2>
<p>ORM is a technique that maps objects to relational data and back.</p>
<p>ORM is not about mapping fields, that would be easy.
It is about mapping the object model to the relational model, and that is a difficult task.
We have to fully understand both models and then we can start finding ways to map them.
We usually find mapping problems that force us to do trade-offs in both models.</p>
<p><img src="/assets/images/posts/2018/orm-wtf/mapping.png" alt="object model mapped to relational model" /></p>
<p>And that is the object-relational mapping - no more, no less.
Mapping is pretty difficult, and maintain two models plus maintain the mapping is also a challenge.
ORM library usually cannot do everything we imagine, it is just a fact we have to face.</p>
<h3>Requirements</h3>
<p>We must have an object model first.
If we don't have object model and object implementation, we can avoid difficult mapping and use the relational model only.</p>
<p>We must need a relational database.
If we don't need the relational database, we don't have to map objects and our work is much easier.</p>
<h2>Common misuses</h2>
<p>When not use the ORM.</p>
<h3>ORM not-Responsibility</h3>
<p>ORM isn't responsible for effective database queries.
It shouldn't produce queries at all.
If it produces queries and they aren't effective, we have to use custom queries and don't blame the ORM.</p>
<p>ORM shouldn't be used for reading.
It isn't meant to be reading effective and it isn't its responsibility.
If we need to read information fast, we have to use fast reading techniques, not ORM.</p>
<h3>No Object Model</h3>
<p>It may happen that we don't have an object model.
It may have more reasons, but it just happens.
Then we must not create artificial objects just because we can.
The same situation is when we think in relations.</p>
<p>If we try objects anyway, we end up with an anemic model.
ORM becomes a stone that pulls us underwater.
Everything becomes horribly slow and ORM will only make problems.</p>
<p>We can live without the ORM.
We can have only one relational model in the database.
We can query it, work with data.
We don't need to bother with objects and difficult mapping.</p>
<h3>No Need for Relational Database</h3>
<p>It may happen that we have a nice object model and we need just to store objects as they are.
There may be no need for inter-aggregate consistency, transactions or joining data.</p>
<p>Then we don't have to bother with relation model and mapping.
We can store objects as they are in a NoSQL database.
Choosing the database can take time but it pays itself.</p>
<h2>TL;DR</h2>
<p><img src="/assets/images/posts/2018/orm-wtf/decision_table.png" alt="decision table" /></p>
<p>Use ORM only if we need to.
Handling two models and mapping is difficult.</p>
<h2>References</h2>
<p>FOOTE, Keith D.
A Review of Different Database Types: Relational versus Non-Relational.
<em>DATAVERSITY</em> [online].
2016 [2018-01-23].
Available: <a href="http://www.dataversity.net/review-pros-cons-different-databases-relational-versus-non-relational/">http://www.dataversity.net/review-pros-cons-different-databases-relational-versus-non-relational/</a>.</p>
<p>Wikipedia contributors.
Class-based programming.
<em>Wikipedia, The Free Encyclopedia</em> [online].
2018 [2018-01-23].
Available: <a href="https://en.wikipedia.org/wiki/Class-based_programming">https://en.wikipedia.org/wiki/Class-based_programming</a>.</p>
<p>Wikipedia contributors.
Object-oriented programming.
<em>Wikipedia, The Free Encyclopedia</em> [online].
2018 [2018-01-23].
Available: <a href="https://en.wikipedia.org/wiki/Object-oriented_programming">https://en.wikipedia.org/wiki/Object-oriented_programming</a>.</p>
<p>Wikipedia contributors.
Relational database.
<em>Wikipedia, The Free Encyclopedia</em> [online].
2018 [2018-01-23].
Available: <a href="https://en.wikipedia.org/wiki/Relational_database">https://en.wikipedia.org/wiki/Relational_database</a>.</p>
<p>Wikipedia contributors.
Relational model.
<em>Wikipedia, The Free Encyclopedia</em> [online].
2018 [2018-01-23].
Available: <a href="https://en.wikipedia.org/wiki/Relational_model">https://en.wikipedia.org/wiki/Relational_model</a>.</p>
<h2>Contact</h2>
<p>Are you designing architecture and like DDD approach? Hire me, I can help you - <a href="http://svatasimara.cz/">svatasimara.cz</a></p>

        <br>

        <div class="container">
            <div id="disqus_thread"></div>

<script type="text/javascript">
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//pehapkari.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
        </div>

        <br>
    </div>

            </div>
        
        <div id="footer">
    <div class="container">
        <div class="row">
            <div class="col-12 col-md-6 mt-3 mt-md-0">
                <p class="mb-2">Web Péhápkaři.cz pohání <a href="https://symfony.com/">Symfony</a> a najdeš ho na <a href="https://github.com/pehapkari/pehapkari.cz">Githubu</a>.</p>

                                            </div>

            <div class="col-12 col-md-6 mt-4 mt-md-0">
                <ul id="socials" class="pull-right">
                    <li>
                        <a href="https://facebook.com/pehapkari">
                            <em class="fab fa-2x fa-facebook"></em>
                        </a>
                    </li>

                    <li>
                        <a href="https://twitter.com/pehapkari">
                            <em class="fab fa-2x fa-twitter"></em>
                        </a>
                    </li>

                    <li>
                        <a href="https://meetup.com/friends-of-php-prague/">
                            <em class="fab fa-2x fa-meetup"></em>
                            <p>Praha</p>
                        </a>
                    </li>

                    <li>
                        <a href="https://meetup.com/Pehapkari-Brno/">
                            <em class="fab fa-2x fa-meetup"></em>
                            <p>Brno</p>
                        </a>
                    </li>

                    <li>
                        <a href="https://github.com/pehapkari">
                            <em class="fab fa-2x fa-github"></em>
                        </a>
                    </li>

                    <li>
                        <a href="https://join.slack.com/t/pehapkari/shared_invite/zt-b5kiu8w2-iqDCp8btryFmXeKiL21fXQ">
                            <em class="fab fa-2x fa-slack"></em>
                        </a>
                        <p>
                            <a href="https://join.slack.com/t/pehapkari/shared_invite/zt-b5kiu8w2-iqDCp8btryFmXeKiL21fXQ/">
                                <span class="hidden-sm-down">Pozvi se</span>
                                <span class="hidden-md-up">Pozvi</span>
                            </a>
                        </p>
                    </li>
                </ul>
            </div>
        </div>

        <div id="footer_body">
            <div class="row">
                <div class="col-6 col-md-4 mb-4 mb-md-0">
                    <h3>O nás</h3>

                    <ul class="bottom_menu">
                        <li>
                            <a href="/kontakt">Kontakt</a>
                        </li>

                        <li>
                            <a href="/for-speakers">Pro speakry</a>
                        </li>

                        <li>
                            <a href="https://github.com/pehapkari/pehapkari.cz/tree/master/public/assets/pehapkari_logo">Logo</a>
                        </li>

                        <li>
                            <a href="/rss.xml">RSS blogu</a>
                        </li>

                        <li>
                            <a href="http://bit.ly/pehapkari-newsletter">Sleduj Newsletter</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/build/js/app.js"></script>

<script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>
<script>
    $('document').ready(function() {
        var typed = new Typed('#typed',{
            stringsElement: '#typed-strings',
            typeSpeed: 50,
            backDelay: 1400,
        });
    });
</script>

<script src="/assets/prism/prism.js"></script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-89860072-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-89860072-1');
</script>
    </body>
</html>
